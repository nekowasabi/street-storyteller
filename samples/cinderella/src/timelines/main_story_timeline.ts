import type { Timeline } from "@storyteller/types/v2/timeline.ts";

/**
 * シンデレラ物語のメインタイムライン
 * 因果関係を含む全イベントを時系列で管理
 */
export const mainStoryTimeline: Timeline = {
  id: "main_story",
  name: "シンデレラ物語タイムライン",
  scope: "story",
  summary: "シンデレラの物語全体の時系列",
  events: [
    {
      id: "event_mother_death",
      title: "実母の死",
      category: "backstory",
      time: { order: 1, label: "幼少期" },
      summary: "シンデレラの実母が亡くなる",
      characters: ["cinderella"],
      settings: ["mansion"],
      chapters: [],
      importance: "major",
    },
    {
      id: "event_remarriage",
      title: "父の再婚",
      category: "backstory",
      time: { order: 2, label: "幼少期" },
      summary: "父が継母と再婚し、義姉たちが家に来る",
      characters: [
        "cinderella",
        "stepmother",
        "stepsister_elder",
        "stepsister_younger",
      ],
      settings: ["mansion"],
      chapters: [],
      causedBy: ["event_mother_death"],
      importance: "major",
    },
    {
      id: "event_father_death",
      title: "父の死",
      category: "backstory",
      time: { order: 3, label: "少女期" },
      summary: "父が亡くなり、シンデレラは継母のもとに残される",
      characters: ["cinderella", "stepmother"],
      settings: ["mansion"],
      chapters: [],
      causedBy: ["event_remarriage"],
      importance: "major",
    },
    {
      id: "event_mistreatment",
      title: "継母による虐待開始",
      category: "character_event",
      time: { order: 4, label: "少女期" },
      summary: "継母による使用人扱い・虐待が始まる",
      characters: [
        "cinderella",
        "stepmother",
        "stepsister_elder",
        "stepsister_younger",
      ],
      settings: ["mansion"],
      chapters: ["chapter_01"],
      causedBy: ["event_father_death"],
      importance: "major",
    },
    {
      id: "event_ball_announcement",
      title: "舞踏会の告知",
      category: "plot_point",
      time: { order: 5, label: "物語開始" },
      summary: "王子の花嫁探しの舞踏会が告知される",
      characters: ["prince", "king"],
      settings: ["kingdom", "castle"],
      chapters: ["chapter_01"],
      importance: "major",
    },
    {
      id: "event_fairy_appears",
      title: "妖精登場",
      category: "plot_point",
      time: { order: 6, label: "舞踏会の夜" },
      summary: "シンデレラの前にフェアリーゴッドマザーが現れる",
      characters: ["cinderella", "fairy_godmother"],
      settings: ["mansion"],
      chapters: ["chapter_02"],
      causedBy: ["event_mistreatment", "event_ball_announcement"],
      importance: "major",
    },
    {
      id: "event_transformation",
      title: "魔法による変身",
      category: "plot_point",
      time: { order: 7, label: "舞踏会の夜" },
      summary: "魔法でドレスとガラスの靴を与えられる",
      characters: ["cinderella", "fairy_godmother"],
      settings: ["mansion"],
      chapters: ["chapter_02"],
      causedBy: ["event_fairy_appears"],
      importance: "major",
    },
    {
      id: "event_ball_dance",
      title: "王子との踊り",
      category: "plot_point",
      time: { order: 8, label: "舞踏会の夜" },
      summary: "舞踏会で王子とシンデレラが踊り、惹かれ合う",
      characters: ["cinderella", "prince"],
      settings: ["castle"],
      chapters: ["chapter_03"],
      causedBy: ["event_transformation"],
      importance: "major",
    },
    {
      id: "event_midnight_escape",
      title: "真夜中の逃走",
      category: "plot_point",
      time: { order: 9, label: "真夜中" },
      summary: "12時の鐘が鳴り、魔法が解ける前に逃げ出す",
      characters: ["cinderella", "prince"],
      settings: ["castle"],
      chapters: ["chapter_03"],
      causedBy: ["event_ball_dance"],
      importance: "major",
    },
    {
      id: "event_glass_slipper_left",
      title: "ガラスの靴を落とす",
      category: "plot_point",
      time: { order: 10, label: "真夜中" },
      summary: "階段でガラスの靴を落としていく",
      characters: ["cinderella"],
      settings: ["castle"],
      chapters: ["chapter_04"],
      causedBy: ["event_midnight_escape"],
      importance: "major",
    },
    {
      id: "event_prince_search",
      title: "王子の捜索",
      category: "plot_point",
      time: { order: 11, label: "舞踏会翌日以降" },
      summary: "王子がガラスの靴に合う娘を探して国中を回る",
      characters: ["prince"],
      settings: ["kingdom"],
      chapters: ["chapter_05"],
      causedBy: ["event_glass_slipper_left"],
      importance: "major",
    },
    {
      id: "event_slipper_fits",
      title: "ガラスの靴が合う",
      category: "climax",
      time: { order: 12, label: "捜索終盤" },
      summary: "シンデレラの足にガラスの靴がぴったり合う",
      characters: [
        "cinderella",
        "prince",
        "stepmother",
        "stepsister_elder",
        "stepsister_younger",
      ],
      settings: ["mansion"],
      chapters: ["chapter_05"],
      causedBy: ["event_prince_search"],
      importance: "major",
    },
    {
      id: "event_happy_ending",
      title: "結婚・ハッピーエンド",
      category: "resolution",
      time: { order: 13, label: "エンディング" },
      summary: "王子とシンデレラが結婚し、幸せに暮らす",
      characters: ["cinderella", "prince"],
      settings: ["castle", "kingdom"],
      chapters: ["chapter_06"],
      causedBy: ["event_slipper_fits"],
      importance: "major",
    },
  ],
};
